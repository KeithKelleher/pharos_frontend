<div class ="full-height">
<mat-card *ngIf = data>
  <mat-card-content>
    <div fxLayout="row" fxLayout.lt-md="column" class ="tkrow" fxLayoutAlign="start stretch">
      <div fxFlex="95">
      <span class="mat-title">Knowledge Summary</span>
      </div>
      <div fxFlex="5">
      <pharos-help-panel-trigger></pharos-help-panel-trigger>
      </div>
    </div>
    <div *ngIf="data.knowledge && data.knowledge.length > 0; else noDataDiv">
    <div fxLayout="row" fxLayout.lt-md="column" class ="tkrow" fxLayoutAlign="center center">
      <div fxFlex="50" class = "kchart full-height">
        <pharos-radar-chart [data] = data.knowledge [shape]="false" [size] = "'medium'" (click)="openModal()" [origin]="'knowledge'"></pharos-radar-chart>
      </div>
        <div fxFlex = "50" class = "kchart full-height">
          <pharos-knowledge-table [data] = data.knowledge></pharos-knowledge-table>
        </div>
        <br>
        <br>
      </div>
    </div>
    <ng-template #noDataDiv>
      <br>
      <div fxLayout="row" fxLayout.lt-md="column" class ="tkrow" fxLayoutAlign="center center">
      <div fxFlex="25"></div>
      <div fxFlex="50" fxLayoutAlign="space-around center" class = "kchart full-height">
        <div><mat-icon class = "huge">error_outline</mat-icon></div><br>
        <div><h2>No data available</h2></div>
      </div>
      <br>
      <br>
      <br>
      </div>
    </ng-template>

    <div>
      <div *ngIf="loading" class = "loadingIcon" fxLayoutAlign="center center">
        <mat-spinner></mat-spinner>
      </div>
    <ng-container *ngIf="getTimeline('PubMed Score')?.length > 0">
      <div fxLayout="row" fxLayoutAlign="start stretch" >
      <div fxFlex="95">
        <span class="mat-title">PubMed Score </span>&nbsp;<span>{{target.jensenScore.toFixed(2)}}</span>
      <pharos-line-chart [data]="getTimeline('PubMed Score')"></pharos-line-chart>
        </div>
      <div fxFlex = "5">
        <pharos-help-panel-trigger ></pharos-help-panel-trigger>
      </div>
      </div>
      </ng-container>
    <ng-container *ngIf="getTimeline('PubTator')?.length >0">
      <div fxLayout="row" fxLayoutAlign="start stretch">
      <div fxFlex="95">
        <span class="mat-title">PubTator Score </span>&nbsp;<span>{{raisePubtator()}}</span>
      <pharos-line-chart [data]="getTimeline('PubTator')"></pharos-line-chart>
        </div>
      <div fxFlex = "5">
        <pharos-help-panel-trigger ></pharos-help-panel-trigger>
      </div>
      </div>
      </ng-container>
    <ng-container *ngIf="getTimeline('Patent Count')?.length >0">
      <div fxLayout="row" fxLayoutAlign="start stretch">
      <div fxFlex="95">
          <span class="mat-title">Patents </span>
          <pharos-line-chart [data]="getTimeline('Patent Count')"></pharos-line-chart>
        </div>
      <div fxFlex = "5">
        <pharos-help-panel-trigger ></pharos-help-panel-trigger>
      </div>
      </div>
      </ng-container>
    </div>
  </mat-card-content>
</mat-card>
</div>
