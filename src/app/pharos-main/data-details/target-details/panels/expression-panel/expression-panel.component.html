<article>
  <mat-card *ngIf="this.target"
            class="section-card"
            id="expression"
            (pharosScrollspy)="active('expression')"
            #expression>
    <mat-card-content>
      <div *ngIf="loading" class="loadingIcon" fxLayoutAlign="center center">
        <img class="spinner rotating" alt="loading..." src="./assets/images/pharos_spinner.svg">
      </div>
      <div fxLayout="row"
           class="tkrow"
           fxLayoutAlign="start stretch">
        <div fxFlex="95">
        <span class="mat-title"
              [matTooltip]=description
              [matTooltipClass]="'pharos-tooltip'">
          Expression Data ({{this.uberonExpressionMap.yValues.length}} Tissues)</span>
        </div>
        <div fxFlex="5">
          <pharos-help-panel-trigger [origin]="'expression'" [label]="'Expression Data'"></pharos-help-panel-trigger>
        </div>
      </div>
      <div class="row" fxLayout.xs="column" fxLayoutAlign="space-around stretch">
        <div fxFlex="95">
          <div class="matrix-anatamogram">
            <div class="section">
              <div class="heatmap-container" [ngClass]="{minimal: clickedTissue}">
                <pharos-heat-map [heatmapData]="uberonExpressionMap" [highlightedValue]="clickedTissue" [heatmapClicked]="tissueClicked.bind(this)"></pharos-heat-map>
              </div>
              <div class="minimal" *ngIf="clickedTissue">
                <pharos-expression-details [selectedTissue]="clickedTissue" [expressions]="target.expressions" [gtex]="target.gtex"></pharos-expression-details>
              </div>
            </div>
            <div class="section anatamogram-container">
              <pharos-anatamogram [tissues]="tissues" [species]="'homo_sapiens'" [shadingKey]="'Average'"
                                  [shadingMap]="this.shadingMap"
                                  [redrawAnatamogram]="this.redrawAnatamogram"
                                  [clickHandler]="this.tissueClicked.bind(this)"></pharos-anatamogram>
            </div>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</article>
