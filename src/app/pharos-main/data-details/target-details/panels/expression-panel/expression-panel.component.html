<article>
  <mat-card *ngIf="this.target"
            class="section-card"
            id="expression"
            (pharosScrollspy)="active('expression')"
            #expression>
    <mat-card-content>
      <div *ngIf="loading" class="loadingIcon" fxLayoutAlign="center center">
        <img class="spinner rotating" alt="loading..." src="./assets/images/pharos_spinner.svg">
      </div>
      <div fxLayout="row"
           class="tkrow"
           fxLayoutAlign="start stretch">
        <div fxFlex="95">
        <span class="mat-title"
              [matTooltip]=description
              [matTooltipClass]="'pharos-tooltip'">
          Expression Data ({{this.uberonExpressionMap.yValues.length}} Tissues)</span>
        </div>
        <div fxFlex="5">
          <pharos-tutorial-link [tutorialName]="'expression-tutorial'"></pharos-tutorial-link>
        </div>
      </div>
      <div class="row" fxLayout.xs="column" fxLayoutAlign="space-around stretch">
        <div fxFlex="95">
          <div class="matrix-anatomogram">
            <div class="section">
              <div class="heatmap-container" [ngClass]="{halfHeight: detailsTissue}">
                <pharos-heat-map [heatmapData]="uberonExpressionMap" [clickedTissue]="clickedTissue" [heatmapClicked]="tissueClicked.bind(this)"></pharos-heat-map>
              </div>
              <div class="details-container halfHeight" *ngIf="detailsTissue">
                <pharos-expression-details [closeFunction]="closeDetails.bind(this)" [selectedTissue]="detailsTissue" [expressions]="target.expressions" [gtex]="target.gtex"></pharos-expression-details>
              </div>
            </div>
            <div class="section anatomogram-container" fxHide.lt-lg>
              <pharos-anatomogram [tissues]="tissues" [species]="'homo_sapiens'" [shadingKey]="'Average'"
                                  [shadingMap]="this.shadingMap"
                                  [redrawAnatomogram]="this.redrawAnatomogram"
                                  [clickHandler]="this.tissueClicked.bind(this)"></pharos-anatomogram>
            </div>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</article>
